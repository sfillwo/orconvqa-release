DATADIR=ciir.cs.umass.edu/downloads/ORConvQA

python3 train_pipeline.py \
    --train_file=$DATADIR/preprocessed/train.txt \
    --dev_file=$DATADIR/preprocessed/dev.txt \
    --test_file=$DATADIR/preprocessed/test.txt \
    --orig_dev_file=$DATADIR/quac_format/dev.txt \
    --orig_test_file=$DATADIR/quac_format/test.txt \
    --qrels=$DATADIR/qrels.txt.gz \
    --blocks_path=$DATADIR/all_blocks.txt.gz \
    --passage_reps_path=$DATADIR/passage_reps.pkl.gz \
    --passage_ids_path=$DATADIR/passage_ids.pkl.gz \
    --output_dir=$DATADIR/pipeline_checkpoint \
    --best_global_step=45000 \
    --load_small=False \
    --history_num=6 \
    --do_train=False \
    --do_eval=False \
    --do_test=True \
    --per_gpu_train_batch_size=2 \
    --per_gpu_eval_batch_size=4 \
    --learning_rate=5e-5 \
    --num_train_epochs=3.0 \
    --logging_steps=5 \
    --save_steps=5000 \
    --overwrite_output_dir=False \
    --eval_all_checkpoints=False \
    --fp16=True \
    --retrieve_checkpoint=$DATADIR/retriever_checkpoint/checkpoint-5917 \
    --retriever_tokenizer_dir=$DATADIR/retriever_checkpoint/ \
    --reader_tokenizer_dir=$DATADIR/pipeline_checkpoint/reader/ \
    --top_k_for_retriever=100 \
    --use_retriever_prob=True \
    --qa_loss_factor=1.0 \
    --retrieval_loss_factor=1.0 \
    --top_k_for_reader=5 \
    --include_first_for_retriever=True \
    --use_rerank_prob=True \
    --early_loss=True \
    --max_answer_length=40